<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hunyuan 3D</title>
    <link rel="stylesheet" href="css/styles.css">
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.4.0/model-viewer.min.js"></script>
    <style>
        model-viewer {
            width: 100%;
            height: 300px;
            background-color: #1a1a1a;
            border-radius: 8px;
            margin-bottom: 16px;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>Hunyuan 3D Generator</h1>

        <div class="settings-section">
            <button id="settings-toggle" class="icon-btn" title="Settings">⚙️ API Key</button>
            <div id="settings-panel" class="hidden">
                <div class="input-group">
                    <label>Replicate API Key</label>
                    <input type="password" id="api-key" placeholder="r8_..." />
                    <button id="save-api-key" class="secondary-btn">Save Key</button>
                </div>
            </div>
        </div>

        <div class="main-content">
            <!-- Image Input -->
            <div class="section upload-section" id="drop-zone">
                <p>Drag & Drop Image or Click to Select</p>
                <input type="file" id="image-input" accept="image/*" hidden>
                <img id="image-preview" src="" alt="Preview" class="hidden">
                <button id="remove-image" class="hidden icon-btn">×</button>
            </div>

            <div class="controls-grid">
                <!-- Basic Controls -->
                <div class="input-group">
                    <label for="steps">Steps (5-50)</label>
                    <div class="range-container">
                        <input type="range" id="steps-range" min="5" max="50" value="50">
                        <input type="number" id="steps" min="5" max="50" value="50">
                    </div>
                </div>

                <div class="input-group">
                    <label for="guidance">Guidance Scale (1-20)</label>
                    <div class="range-container">
                        <input type="range" id="guidance-range" min="1" max="20" step="0.5" value="7.5">
                        <input type="number" id="guidance" min="1" max="20" step="0.5" value="7.5">
                    </div>
                </div>

                <div class="input-group">
                    <label for="octree">Octree Resolution</label>
                    <select id="octree">
                        <option value="196">196</option>
                        <option value="256" selected>256</option>
                        <option value="384">384</option>
                        <option value="512">512</option>
                    </select>
                </div>

                <!-- Advanced Toggle -->
                <div class="advanced-toggle">
                    <label><input type="checkbox" id="show-advanced"> Show Advanced Settings</label>
                </div>

                <div id="advanced-controls" class="hidden">
                    <div class="input-group">
                        <label for="seed">Seed (Random: -1)</label>
                        <input type="number" id="seed" value="-1" placeholder="Random">
                    </div>

                    <div class="input-group">
                        <label for="max-facenum">Max Facenum</label>
                        <input type="number" id="max-facenum" min="10000" max="200000" value="20000">
                    </div>

                    <div class="input-group">
                        <label for="num-chunks">Num Chunks</label>
                        <input type="number" id="num-chunks" min="1000" max="200000" value="8000">
                    </div>
                </div>

                <div class="toggles-row">
                    <label class="toggle-switch">
                        <input type="checkbox" id="remove-bg" checked>
                        <span class="slider"></span>
                        <span class="label-text">Remove BG</span>
                    </label>
                    <label class="toggle-switch">
                        <input type="checkbox" id="gen-texture" checked>
                        <span class="slider"></span>
                        <span class="label-text">Texture</span>
                    </label>
                </div>
            </div>

            <button id="generate-btn" class="primary-btn">Generate 3D Model</button>

            <!-- Status & Output -->
            <div id="status-container" class="hidden">
                <div class="loader"></div>
                <p id="status-text">Processing...</p>
                <div id="logs" class="logs-box hidden"></div>
            </div>

            <div id="result-section" class="hidden">
                <h3>Result</h3>
                <model-viewer id="model-preview" src="" auto-rotate camera-controls shadow-intensity="1"></model-viewer>
                <div class="result-actions">
                    <button id="download-btn" class="secondary-btn">Download .GLB</button>
                    <button id="import-btn" class="primary-btn">Import to After Effects</button>
                </div>
            </div>
        </div>
    </div>

    <script src="js/CSInterface.js"></script>
    <script src="js/main.js"></script>
</body>

</html>